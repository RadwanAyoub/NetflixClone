name: Auto Assign Reviewers

on:
  pull_request:
    types: [ready_for_review, opened, reopened, synchronize]
    branches: [ master ]

permissions:
  pull-requests: write

jobs:
  assign-reviewers:
    name: Assign Reviewers
    runs-on: ubuntu-latest
    
    steps:
    - name: Assign Fixed Reviewers
      uses: actions/github-script@v7
      with:
        script: |
          console.log('üöÄ Starting auto-reviewer assignment...');
          
          // Replace these with actual GitHub usernames
          const REVIEWERS = [
            'RadwanAyoub',  // Replace with your username
            // 'another-teammate',  // Add more teammates as needed
          ];
          
          const TEAM_REVIEWERS = [
            // 'your-team-slug',  // Add team slugs if you have teams
          ];
          
          console.log('üë• Assigning reviewers:', REVIEWERS);
          console.log('üè¢ Assigning team reviewers:', TEAM_REVIEWERS);
          
          try {
            await github.rest.pulls.requestReviewers({
              owner: context.repo.owner,
              repo: context.repo.repo,
              pull_number: context.payload.pull_request.number,
              reviewers: REVIEWERS,
              team_reviewers: TEAM_REVIEWERS,
            });
            
            console.log('‚úÖ Successfully assigned reviewers!');
            
          } catch (error) {
            console.log('‚ùå Error assigning reviewers:', error.message);
            console.log('üí° Make sure the usernames are correct and have access to the repo');
          }